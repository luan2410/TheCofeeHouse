<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>Gi·ªè H√†ng</title>
</head>
<body>
  <h1>üçΩÔ∏è Demo Gi·ªè H√†ng</h1>

  <!-- Form th√™m m√≥n v√†o gi·ªè -->
  <h2>üõí Th√™m m√≥n v√†o gi·ªè</h2>
  <label>User ID: <input type="text" id="userId" /></label><br>
  <label>Product ID: <input type="text" id="productId" /></label><br>
  <label>Lo·∫°i:
    <select id="category">
      <option value="MonAn">M√≥n ƒÇn</option>
      <option value="MonNuoc">M√≥n N∆∞·ªõc</option>
    </select>
  </label><br>
  <label>S·ªë l∆∞·ª£ng: <input type="number" id="quantity" min="1" value="1" /></label><br>
  <button onclick="addToCart()">Th√™m v√†o gi·ªè</button>

  <hr>

  <!-- Form thanh to√°n -->
  <h2>üí≥ Thanh to√°n</h2>
  <label>User ID: <input type="text" id="checkoutUserId" /></label><br>
  <button onclick="checkout()">Thanh to√°n ngay</button>

  <script>
    async function addToCart() {
      const userId = document.getElementById('userId').value;
      const productId = document.getElementById('productId').value;
      const category = document.getElementById('category').value;
      const quantity = Number(document.getElementById('quantity').value);

      const res = await fetch('http://localhost:3000/cart/add', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json'
        },
        body: JSON.stringify({ userId, productId, category, quantity })
      });

      const data = await res.json();
      if (res.ok) {
        alert('‚úÖ ƒê√£ th√™m v√†o gi·ªè h√†ng');
        console.log(data.cart);
      } else {
        alert('‚ùå L·ªói: ' + data.message);
      }
    }

    async function checkout() {
      const userId = document.getElementById('checkoutUserId').value;

      const res = await fetch('http://localhost:3000/checkout', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json'
        },
        body: JSON.stringify({ userId })
      });

      const data = await res.json();
      if (res.ok) {
        alert('‚úÖ Thanh to√°n th√†nh c√¥ng!');
        console.log(data.order);
      } else {
        alert('‚ùå L·ªói: ' + data.message);
      }
    }
  </script>
</body>
</html>
